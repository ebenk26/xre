var AppInbox=function(){var t=$(".inbox-content"),n="",e=function(e,o){e.attr("data-title");n=o,App.blockUI({target:t,overlayColor:"none",animate:!0}),i(e),$.ajax({type:"GET",cache:!1,url:"/custom_pages/student-inbox-list.html",dataType:"html",success:function(n){i(e),App.unblockUI(".inbox-content"),t.html(n),Layout.fixContentHeight&&Layout.fixContentHeight()},error:function(t,n,o){i(e)},async:!1}),jQuery("body").on("change",".mail-group-checkbox",function(){var t=jQuery(".mail-checkbox"),n=jQuery(this).is(":checked");jQuery(t).each(function(){$(this).prop("checked",n)})})},o=function(o,a,c){App.blockUI({target:t,overlayColor:"none",animate:!0}),i(o);var r=o.parent("tr").attr("data-messageid");$.ajax({type:"GET",cache:!1,url:"/custom_pages/student-inbox-view.html",dataType:"html",data:{message_id:r},success:function(a){App.unblockUI(t),i(o),c&&$(".inbox-nav > li.active").removeClass("active"),$(".inbox-header").on("click",".inbox-discard-btn",function(t){t.preventDefault(),$(this).remove(),e($(this),n)}),t.html(a),Layout.fixContentHeight()},error:function(t,n,e){i(o)},async:!1})},i=function(t){void 0!==t&&(t.attr("disabled")?t.attr("disabled",!1):t.attr("disabled",!0))};return{init:function(){$(".inbox-content").show(function(){e($(this))}),$(".inbox").on("click",".inbox-discard-btn",function(t){t.preventDefault(),e($(this),n)}),$(".inbox").on("click",".view-message",function(){o($(this))}),"view"===App.getURLParameter("a")?o():"compose"===App.getURLParameter("a")?loadCompose():$(".inbox-nav > li:first > a").click()}}}();jQuery(document).ready(function(){AppInbox.init()});